(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={overlay:"modalOverlay_overlay__33PPq"}},101:function(e,t,n){e.exports={listItem:"burgerIngredient_listItem__WfpEa"}},102:function(e,t,n){e.exports={container:"userOrdersList_container__1xnJ8"}},110:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(36),s=n.n(c),i=(n(110),n(11)),o=n(25),l=n(10),u=n(6),d=n(3),m=n(4),j=n(9),b=n.n(j),p=n(7),x=n.n(p),f=n(13);function h(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function O(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c}function _(e){O(e,"",{expires:-1})}function g(e){var t=new Date(Date.parse(e)),n=(new Date).getTime()-t.getTime(),r=new Intl.DateTimeFormat("ru-RU",{hour:"numeric",minute:"numeric",timeZoneName:"short"}).format(t),a=Math.floor(n/1e3/60/60/24);switch(a){case 0:return"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(r);case 1:return"\u0412\u0447\u0435\u0440\u0430, ".concat(r);case 2:case 3:case 4:return"".concat(a," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, ").concat(r);default:return"".concat(a," \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434, ").concat(r)}}var v="https://norma.nomoreparties.space/api",y="".concat(v,"/ingredients"),N="".concat(v,"/orders"),k="".concat(v,"/auth/register"),C="".concat(v,"/password-reset"),w="".concat(v,"/password-reset/reset"),I="".concat(v,"/auth/login"),E="".concat(v,"/auth/user"),F="".concat(v,"/auth/token"),S="".concat(v,"/auth/logout"),T=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))},q=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h("token")},body:JSON.stringify({ingredients:t})}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h("token")}}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h("refreshToken")})}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+h("token")},body:JSON.stringify(t)}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h("refreshToken")})}).then((function(e){return T(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=n(20),H=Object(A.c)({name:"auth",initialState:{emailUser:"",nameUser:"",registerRequest:!1,registerFailed:!1,checkEmailExistRequest:!1,checkEmailExistFailed:!1,isEmailExist:!1,resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordSuccess:!1,authFailed:!1,isLogged:!1,refreshUserRequestFailed:!1,logoutRequestFailed:!1},reducers:{registerRequest:function(e){e.registerRequest=!0},registerSuccess:function(e,t){e.registerFailed=!1,e.emailUser=t.payload.email,e.nameUser=t.payload.name,e.registerRequest=!1,e.isLogged=!0},registerFailed:function(e){e.registerFailed=!0,e.registerRequest=!1},checkEmailRequest:function(e){e.checkEmailExistRequest=!0},checkEmailSuccess:function(e){e.checkEmailExistFailed=!1,e.isEmailExist=!0,e.checkEmailExistRequest=!1},checkEmailFailed:function(e){e.checkEmailExistFailed=!0,e.checkEmailExistRequest=!1},resetPasswordRequest:function(e){e.resetPasswordRequest=!0},resetPasswordSuccess:function(e){e.resetPasswordFailed=!1,e.resetPasswordRequest=!1,e.resetPasswordSuccess=!0},resetPasswordFailed:function(e){e.resetPasswordFailed=!0,e.resetPasswordRequest=!1},authSuccess:function(e,t){e.authFailed=!1,e.emailUser=t.payload.email,e.nameUser=t.payload.name,e.isLogged=!0},authFailed:function(e){e.authFailed=!0},userInfoSuccess:function(e,t){e.emailUser=t.payload.email,e.nameUser=t.payload.name,e.isLogged=!0,e.refreshUserRequestFailed=!1},logoutSuccess:function(e){e.isLogged=!1,e.logoutRequestFailed=!1},logoutRequestFailed:function(e){e.logoutRequestFailed=!0},userInfoFailed:function(e){e.isLogged=!1},refreshUserFailed:function(e){e.refreshUserRequestFailed=!0}}}),W=H.actions,V=W.registerRequest,K=W.registerSuccess,Z=W.registerFailed,G=W.checkEmailRequest,Y=W.checkEmailSuccess,Q=W.checkEmailFailed,X=W.resetPasswordRequest,$=W.resetPasswordSuccess,ee=W.resetPasswordFailed,te=W.authSuccess,ne=W.authFailed,re=W.userInfoSuccess,ae=W.logoutSuccess,ce=W.userInfoFailed,se=W.refreshUserFailed,ie=W.logoutRequestFailed,oe=H.reducer,le=function(){return function(e){return M().then((function(t){t&&t.success&&e(re({email:t.user.email,name:t.user.name}))})).catch((function(t){403===t?U().then((function(e){_("token"),_("refreshToken"),O("token",e.accessToken.split("Bearer ")[1]),O("refreshToken",e.refreshToken),M()})).catch((function(){e(ce())})):e(ce())}))}},ue=n(42),de=function(){return Object(ue.b)()},me=ue.c,je=n(0);var be=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(l.a)(Object(l.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))},s=de(),j=Object(i.h)().state,p=me((function(e){return e.auth.isLogged})),x=Object(r.useCallback)((function(e){e.preventDefault(),s(function(e){return function(t){return B(e).then((function(e){e&&e.success?(O("token",e.accessToken.split("Bearer ")[1]),O("refreshToken",e.refreshToken),t(te({email:e.user.email,name:e.user.name}))):t(ne())})).catch((function(){t(ne())}))}}(n))}),[s,n]);return p||h("refreshToken")?Object(je.jsx)(i.a,{to:(null===j||void 0===j?void 0:j.from)||"/"}):Object(je.jsxs)("div",{className:b.a.container,children:[Object(je.jsxs)("form",{className:b.a.form,onSubmit:x,children:[Object(je.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{type:"email",placeholder:"E-mail",onChange:c,value:n.email,name:"email"})}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.PasswordInput,{onChange:c,value:n.password,name:"password"})}),Object(je.jsx)(d.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(je.jsxs)("div",{className:"text text_type_main-small text_color_inactive mt-20",children:["\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(je.jsx)(m.b,{to:"/register",className:b.a.link,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(je.jsxs)("div",{className:"text text_type_main-small text_color_inactive mt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(je.jsx)(m.b,{to:"/forgot-password",className:b.a.link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},pe=n(33),xe=n.n(pe),fe=n(98),he=n.n(fe),Oe=n(43),_e=n.n(Oe),ge=n(194);var ve=function(e){var t=e.data,n=Object(i.h)(),r=me((function(e){return e.burger.counter})),a=t._id,c=t.type,s=Object(ge.a)({type:"ingredient",item:{id:a,type:c},collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(u.a)(s,2),l=o[0].isDragging,j=o[1];return Object(je.jsx)(je.Fragment,{children:Object(je.jsx)("div",{ref:j,style:{border:l?"2px solid lightgreen":"0px"},"data-qa":"ingredient-card",className:"".concat(_e.a.cart," mb-8"),children:Object(je.jsxs)(m.b,{className:_e.a.link,to:{pathname:"/ingredients/".concat(a),state:{background:n}},children:[!!r[a]&&Object(je.jsx)(d.Counter,{count:r[a],size:"default"}),Object(je.jsx)("img",{src:t.image,alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(je.jsxs)("div",{className:"".concat(_e.a.price," mt-1 mb-1"),children:[Object(je.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(je.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(je.jsx)("h5",{className:"".concat(_e.a.name," text text_type_main-default"),children:t.name})]})})})};var ye=function(e){var t=e.type,n=e.title,r=me((function(e){return e.burger.items})).filter((function(e){return e.type===t}));return Object(je.jsxs)("div",{children:[Object(je.jsx)("h2",{id:t,className:"text text_type_main-medium mb-6",children:n}),Object(je.jsx)("div",{className:"".concat(he.a.list," mb-2 pr-4 pl-4"),children:r.map((function(e){return Object(je.jsx)(ve,{data:e},e._id)}))})]})};var Ne=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n,r=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var n,r=e.target.id;null===(n=t.current)||void 0===n||n.querySelectorAll("li").forEach((function(e){e.id===r?e.classList.add("".concat(xe.a.activeTab)):e.classList.remove("".concat(xe.a.activeTab))}))}}))}),{root:e.current,rootMargin:"0px 0px -80% 0px",threshold:.5});null===(n=e.current)||void 0===n||n.querySelectorAll("h2").forEach((function(e){return r.observe(e)}))}),[]),Object(je.jsxs)("section",{children:[Object(je.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(je.jsx)("nav",{ref:t,children:Object(je.jsxs)("ul",{className:xe.a.tabs,children:[Object(je.jsx)("li",{className:"".concat(xe.a.tab),id:"bun",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(je.jsx)("li",{className:xe.a.tab,id:"sauce",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(je.jsx)("li",{className:xe.a.tab,id:"main",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})}),Object(je.jsxs)("div",{ref:e,className:"pt-10",style:{height:"610px",overflow:"scroll",overflowX:"hidden"},children:[Object(je.jsx)(ye,{title:"\u0411\u0443\u043b\u043a\u0438",type:"bun"}),Object(je.jsx)(ye,{title:"\u0421\u043e\u0443\u0441\u044b",type:"sauce"}),Object(je.jsx)(ye,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",type:"main"})]})]})},ke=n(26),Ce=n.n(ke),we=n(76),Ie=n.n(we),Ee=n(100),Fe=n.n(Ee);var Se=function(e){var t=e.onModalClose;return Object(je.jsx)("div",{className:Fe.a.overlay,onClick:t})};var Te=function(e){var t=e.onModalClose,n=e.title,a=e.isOpened,c=e.children,i=Object(r.useCallback)((function(e){"Escape"===e.key&&t()}),[t]);return Object(r.useEffect)((function(){return document.addEventListener("keydown",i),function(){return document.removeEventListener("keydown",i)}}),[i]),a?s.a.createPortal(Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(Se,{onModalClose:t}),Object(je.jsxs)("div",{className:"".concat(Ie.a.modal," pl-10 pr-10 pb-10 pt-10"),children:[Object(je.jsxs)("div",{className:Ie.a.header,children:[Object(je.jsx)("h3",{className:"text text_type_main-large",children:n}),Object(je.jsx)("div",{"data-qa":"close-icon",onClick:t,children:Object(je.jsx)(d.CloseIcon,{type:"primary"})})]}),c]})]}),document.getElementById("modal")):Object(je.jsx)(je.Fragment,{})},qe=n(54),Re=n.n(qe);var Pe=function(e){var t=e.orderNumber,n=e.isError,r=e.isWithoutBun,a=e.isLoading;return n||r||a?Object(je.jsx)("div",{className:"".concat(Re.a.order," pl-25 pr-25"),children:Object(je.jsx)("div",{className:"text text_type_main-medium mb-15",children:r?"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432 \u0431\u0443\u0440\u0433\u0435\u0440 \u0431\u0443\u043b\u043e\u0447\u043a\u0443":a?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})}):Object(je.jsxs)("div",{className:"".concat(Re.a.order," pl-25 pr-25"),children:[t&&Object(je.jsx)("h1",{className:"text text_type_digits-large mb-8","data-qa":"order-nunber",children:t}),Object(je.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(je.jsx)("img",{src:"/images/graphics.png",alt:"123",className:"mb-15"}),Object(je.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(je.jsx)("p",{className:"".concat(Re.a.text," text text_type_main-default text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},De=Object(A.c)({name:"burger",initialState:{items:[],itemsRequest:!1,itemsFailed:!1,orderNumberRequest:!1,orderNumber:0,orderNumberFailed:!1,burgerIngredients:[],counter:{},price:0},reducers:{getIngredientsRequest:function(e){e.itemsRequest=!0},getIngredientsSuccess:function(e,t){e.itemsFailed=!1,e.items=t.payload,e.itemsRequest=!1},getIngredientsFailed:function(e){e.itemsFailed=!0,e.itemsRequest=!1},getNumberOrderRequest:function(e){e.orderNumberRequest=!0},getNumberOrderSuccess:function(e,t){e.orderNumberFailed=!1,e.orderNumber=t.payload,e.orderNumberRequest=!1,e.burgerIngredients=[],e.price=0,e.counter={}},getNumberOrderFailed:function(e){e.orderNumberFailed=!0,e.orderNumberRequest=!1},getburgerIngredients:function(e,t){e.burgerIngredients.push(t.payload.ingredient),e.price=e.price+t.payload.price},deleteBurgerIngredient:function(e,t){e.burgerIngredients.splice(t.payload,1)},increaseCounter:function(e,t){e.counter[t.payload.id]=t.payload.counter},decreaseCounter:function(e,t){e.counter[t.payload.id]=t.payload.counter},increasePrice:function(e,t){e.price=e.price+t.payload},decreasePrice:function(e,t){e.price=e.price-t.payload},moveCard:function(e,t){var n=e.burgerIngredients[t.payload.dragIndex];e.burgerIngredients.splice(t.payload.dragIndex,1),e.burgerIngredients.splice(t.payload.hoverIndex,0,n)}}}),Le=De.actions,Be=Le.getIngredientsRequest,Me=Le.getIngredientsSuccess,Ue=Le.getIngredientsFailed,ze=Le.getNumberOrderSuccess,Je=Le.getNumberOrderFailed,Ae=Le.getburgerIngredients,He=Le.increaseCounter,We=Le.deleteBurgerIngredient,Ve=Le.decreaseCounter,Ke=Le.getNumberOrderRequest,Ze=(Le.increasePrice,Le.decreasePrice),Ge=Le.moveCard,Ye=De.reducer,Qe=n(195),Xe=n(101),$e=n.n(Xe);var et=function(e){var t=e.ingredient,n=e.id,a=e.index,c=e.deleteIngredient,s=de(),i=Object(r.useRef)(null),o=Object(Qe.a)({accept:"element",hover:function(e,t){var n;if(i.current){var r=e.index,c=a;if(r!==c){var o=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset();if(u){var d=u.y-o.top;r<c&&d<l||r>c&&d>l||(s(Ge({dragIndex:r,hoverIndex:c})),e.index=c)}}}}}),l=Object(u.a)(o,2)[1],m=Object(ge.a)({type:"element",item:function(){return{id:n,index:a}},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(u.a)(m,2),b=j[0].isDragging?0:1;return(0,j[1])(l(i)),Object(je.jsxs)("div",{ref:i,className:$e.a.listItem,style:{opacity:b},children:["bun"!==t.type&&Object(je.jsx)(d.DragIcon,{type:"primary"}),"bun"!==t.type&&Object(je.jsx)(d.ConstructorElement,{type:void 0,isLocked:!1,handleClose:function(){return c(t,a)},text:t.name,price:t.price,thumbnail:t.image})]})},tt=n(196);var nt=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(u.a)(c,2),o=s[0],m=s[1],j=Object(r.useState)(!1),b=Object(u.a)(j,2),p=b[0],x=b[1],f=me((function(e){return e.burger.burgerIngredients})),O=de(),_=me((function(e){return e.burger})),g=_.orderNumber,v=_.orderNumberFailed,y=_.orderNumberRequest,N=_.price,k=_.items,C=_.counter,w=Object(i.g)(),I=Object(Qe.a)({accept:"ingredient",collect:function(e){return{isHover:e.isOver()}},drop:function(e){var t=k.find((function(t){return t._id===e.id}));if(t){var n=Object(l.a)(Object(l.a)({},t),{},{key:Object(tt.a)()});"bun"===t.type?O(Ae({ingredient:n,price:2*t.price})):O(Ae({ingredient:n,price:t.price}))}e.id in C?O(He({id:e.id,counter:C[e.id]+1})):"bun"===e.type?O(He({id:e.id,counter:2})):O(He({id:e.id,counter:1}))}}),E=Object(u.a)(I,2),F=E[0].isHover,S=E[1],T=F?"2px solid lightgreen":"0px";Object(r.useEffect)((function(){var e=[],t=[];f.forEach((function(n,r){"bun"===n.type&&(e.push(r),t.push(n))})),t.length>1&&(P(t[0],e[0],!0),t.splice(0,1),e.splice(0,1)),m(t[0])}),[f]);var q=function(){if(h("refreshToken")){if(o){var e=f.map((function(e){return e._id}));x(!1),O(function(e){return function(t){return t(Ke()),R(e).then((function(e){e&&e.success?t(ze(e.order.number)):t(Je())})).catch((function(){t(Je())}))}}(e))}else x(!0);a(!0)}else w.push("/login")},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O(We(t)),"bun"===e.type?O(Ve({id:e._id,counter:C[e._id]-2})):O(Ve({id:e._id,counter:C[e._id]-1})),O(Ze(n?2*e.price:e.price))};return Object(je.jsxs)("section",{ref:S,style:{border:T},className:"".concat(Ce.a.list," mt-25"),"data-qa":"constructor-container",children:[Object(je.jsxs)("div",{className:Ce.a.wrapper,children:[Object(je.jsx)("div",{className:"".concat(Ce.a.flexEnd),children:o&&Object(je.jsx)(d.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(o.name," (\u0432\u0435\u0440\u0445)"),price:o.price,thumbnail:o.image})}),Object(je.jsx)("div",{className:"".concat(Ce.a.container," mt-2 mb-2"),children:f.map((function(e,t){return Object(je.jsx)(et,{id:e.key,ingredient:e,index:t,deleteIngredient:P},e.key)}))}),Object(je.jsx)("div",{className:"".concat(Ce.a.flexEnd),children:o&&Object(je.jsx)(d.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(o.name," (\u043d\u0438\u0437)"),price:o.price,thumbnail:o.image})})]}),Object(je.jsxs)("div",{className:"".concat(Ce.a.flex," ").concat(Ce.a.order," mt-10 mb-13"),children:[Object(je.jsxs)("div",{className:"".concat(Ce.a.flex," ").concat(Ce.a.alignCenter," mr-10"),children:[Object(je.jsx)("p",{className:"text text_type_digits-medium mr-2",children:N}),Object(je.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(je.jsx)(d.Button,{"data-qa":"order-button",type:"primary",size:"large",onClick:function(){return q()},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),!!g&&Object(je.jsx)(Te,{title:"",isOpened:n,onModalClose:function(){return a(!1)},children:Object(je.jsx)(Pe,{orderNumber:g,isError:v,isLoading:y,isWithoutBun:p})})]})},rt=n(55),at=n.n(rt),ct=n(193),st=n(103);var it=function(){var e=me((function(e){return e.burger})),t=e.itemsFailed,n=e.itemsRequest,r=e.items,a={height:window.innerHeight,overflow:"hidden"};return t?Object(je.jsx)("div",{style:a,className:at.a.error,children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}):n?Object(je.jsx)("div",{style:a,className:at.a.error,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(je.jsx)("div",{style:a,children:Object(je.jsx)("main",{className:at.a.main,children:Object(je.jsxs)(ct.a,{backend:st.a,children:[!!r.length&&Object(je.jsx)(Ne,{}),!!r.length&&Object(je.jsx)(nt,{})]})})})};var ot=function(){var e=Object(r.useState)({email:"",password:"",name:""}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(l.a)(Object(l.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))},s=de(),j=me((function(e){return e.auth})),p=j.nameUser,x=j.registerRequest,f=j.registerFailed,_=Object(r.useCallback)((function(e){e.preventDefault(),s(function(e){return function(t){return t(V()),P(e).then((function(e){e&&e.success?(O("token",e.accessToken.split("Bearer ")[1]),O("refreshToken",e.refreshToken),t(K({email:e.user.email,name:e.user.name}))):t(Z())})).catch((function(){t(Z())}))}}(n))}),[s,n]);return p||h("refreshToken")?Object(je.jsx)(i.a,{to:{pathname:"/"}}):f||x?Object(je.jsx)("div",{className:b.a.container,children:Object(je.jsx)("span",{className:"text text_type_main-large",children:f?"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u043d\u043e\u0432\u043e":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}):Object(je.jsxs)("div",{className:b.a.container,children:[Object(je.jsxs)("form",{className:b.a.form,onSubmit:_,children:[Object(je.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:c,value:n.name,name:"name"})}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{type:"email",placeholder:"E-mail",onChange:c,value:n.email,name:"email"})}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.PasswordInput,{onChange:c,value:n.password,name:"password"})}),Object(je.jsx)(d.Button,{type:"primary",size:"large",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(je.jsxs)("div",{className:"text text_type_main-small text_color_inactive mt-20",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(je.jsx)(m.b,{to:"/login",className:b.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var lt=function(){var e=Object(r.useState)({password:"",token:""}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(l.a)(Object(l.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))},s=de(),j=me((function(e){return e.auth})),p=j.resetPasswordSuccess,x=j.isLogged,f=j.isEmailExist,O=Object(r.useCallback)((function(e){e.preventDefault(),s(function(e){return function(t){return t(X()),L(e).then((function(e){e&&e.success?t($()):t(ee())})).catch((function(){t(ee())}))}}(n))}),[s,n]);return p?Object(je.jsx)(i.a,{to:{pathname:"/profile"}}):x||h("refreshToken")?Object(je.jsx)(i.a,{to:{pathname:"/"}}):f?Object(je.jsxs)("div",{className:b.a.container,children:[Object(je.jsxs)("form",{className:b.a.form,onSubmit:O,children:[Object(je.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.PasswordInput,{onChange:c,value:n.password,name:"password"})}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:c,value:n.token,name:"token"})}),Object(je.jsx)(d.Button,{type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(je.jsxs)("div",{className:"text text_type_main-small text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(je.jsx)(m.b,{to:"/login",className:b.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(je.jsx)(i.a,{to:{pathname:"/login"}})};var ut=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=de(),s=me((function(e){return e.auth})),o=s.checkEmailExistRequest,l=s.checkEmailExistFailed,j=s.isEmailExist,p=s.isLogged,x=Object(r.useCallback)((function(e){e.preventDefault(),c(function(e){return function(t){return t(G()),D(e).then((function(e){e&&e.success?t(Y()):t(Q())})).catch((function(){t(Q())}))}}(n))}),[c,n]);return j?Object(je.jsx)(i.a,{to:{pathname:"/reset-password"}}):p||h("refreshToken")?Object(je.jsx)(i.a,{to:{pathname:"/"}}):o||l?Object(je.jsx)("div",{className:b.a.container,children:Object(je.jsx)("span",{className:"text text_type_main-large",children:l?"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u043d\u043e\u0432\u043e":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}):Object(je.jsxs)("div",{className:b.a.container,children:[Object(je.jsxs)("form",{className:b.a.form,onSubmit:x,children:[Object(je.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){a(e.target.value)},value:n})}),Object(je.jsx)(d.Button,{type:"primary",size:"large",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(je.jsxs)("div",{className:"text text_type_main-small text_color_inactive mt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(je.jsx)(m.b,{to:"/login",className:b.a.link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},dt=n(22),mt=n.n(dt),jt=Object(A.b)("ORDER_LIST_CONNECT"),bt=Object(A.b)("ORDER_LIST_DISCONNECT"),pt=n(51),xt=n(27),ft=n.n(xt);var ht=function(e){var t,n=e.orderData,r=Object(i.h)(),a=me((function(e){return e.burger.items})),c=[],s=Object(pt.a)(n.ingredients);try{var o=function(){var e=t.value;a.forEach((function(t){t._id===e&&c.push(Object(l.a)(Object(l.a)({},t),{},{key:Object(tt.a)()}))}))};for(s.s();!(t=s.n()).done;)o()}catch(b){s.e(b)}finally{s.f()}var u=c.reduce((function(e,t){return e+t.price}),0),j=c.slice(0,6);return n?Object(je.jsx)(m.b,{className:ft.a.link,to:{pathname:"".concat(r.pathname,"/").concat(n._id),state:{background:r}},children:Object(je.jsxs)("div",{className:"".concat(ft.a.container," pt-6 pr-6 pl-6 pb-6 mt-4 mr-2"),children:[Object(je.jsxs)("div",{className:ft.a.first_line,children:[Object(je.jsxs)("p",{className:"text text_type_digits-default",children:["#",n.number]}),Object(je.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:g(n.createdAt)})]}),Object(je.jsx)("div",{title:n.name,className:"".concat(ft.a.name," text text_type_main-medium pt-6"),children:n.name}),Object(je.jsxs)("div",{className:"".concat(ft.a.first_line," pt-6"),children:[Object(je.jsx)("div",{className:ft.a.flexbox,children:j.map((function(e,t){return Object(je.jsx)("div",{className:ft.a.ingredient,style:{position:"relative",backgroundImage:"url(".concat(e.image_mobile,")"),backgroundRepeat:"no-repeat",backgroundColor:"#131316",backgroundPosition:"50% 50%",right:10*t+"px",zIndex:100-t}},e.key)}))}),Object(je.jsxs)("div",{className:ft.a.flexbox,children:[Object(je.jsx)("div",{className:"text text_type_digits-default mr-2",children:u}),Object(je.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})}):Object(je.jsx)(je.Fragment,{})},Ot=n(102),_t=n.n(Ot);var gt=function(){var e=de();Object(r.useEffect)((function(){return e(jt("wss://norma.nomoreparties.space/orders?token=".concat(h("token")))),function(){e(bt())}}),[e]);var t=me((function(e){return e.orderList.orders}));return(null===t||void 0===t?void 0:t.orders.length)?Object(je.jsx)("div",{className:_t.a.container,children:null===t||void 0===t?void 0:t.orders.map((function(e,t){return Object(je.jsx)(ht,{orderData:e},t)}))}):Object(je.jsx)("div",{className:"text text_type_main-medium",children:"\u0423 \u0432\u0430\u0441 \u0435\u0449\u0451 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})};var vt=function(){var e=de(),t=me((function(e){return e.auth})),n=t.emailUser,a=t.nameUser,c=t.refreshUserRequestFailed,s=t.logoutRequestFailed,j=Object(r.useState)(!0),p=Object(u.a)(j,2),g=p[0],v=p[1],y=Object(r.useState)(!0),N=Object(u.a)(y,2),k=N[0],C=N[1],w=Object(r.useState)(!0),I=Object(u.a)(w,2),E=I[0],F=I[1],S=Object(r.useState)({email:n,password:"",name:a}),T=Object(u.a)(S,2),q=T[0],R=T[1],P=function(e){R(Object(l.a)(Object(l.a)({},q),{},Object(o.a)({},e.target.name,e.target.value)))};Object(r.useEffect)((function(){e(le())}),[]),Object(r.useEffect)((function(){R({email:n,password:"",name:a})}),[n,a]);var D=Object(r.useCallback)((function(t){t.preventDefault(),e(function(e){return function(t){return z(e).then((function(e){e&&e.success&&t(re({email:e.user.email,name:e.user.name}))})).catch((function(n){403===n?U().then((function(t){_("token"),_("refreshToken"),O("token",t.accessToken.split("Bearer ")[1]),O("refreshToken",t.refreshToken),z(e)})).catch((function(){t(ce())})):t(se())}))}}(q))}),[e,q]),L=Object(r.useCallback)((function(e){e.preventDefault(),R({email:n,password:"",name:a})}),[e,q]),B=Object(r.useCallback)(Object(f.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((function(e){return J().then((function(t){t&&t.success&&(_("token"),_("refreshToken"),e(ae()))})).catch((function(){e(ie())}))}));case 2:C(!1);case 3:case"end":return t.stop()}}),t)}))),[e]);return k&&h("refreshToken")?s?Object(je.jsx)("div",{className:"".concat(mt.a.navItem," text text_type_main-medium"),children:'\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0438 \u0437\u0430\u043d\u043e\u0432\u043e \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0412\u044b\u0445\u043e\u0434" \u0434\u043b\u044f \u0432\u044b\u0445\u043e\u0434\u0430'}):Object(je.jsxs)("div",{className:mt.a.container,children:[Object(je.jsxs)("div",{className:mt.a.navWrapper,children:[Object(je.jsxs)("nav",{className:mt.a.nav,children:[Object(je.jsx)(m.c,{activeClassName:mt.a.active,className:"".concat(mt.a.navItem," text text_type_main-medium text_color_inactive"),exact:!0,to:{pathname:"/profile"},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(je.jsx)(m.c,{activeClassName:mt.a.active,className:"".concat(mt.a.navItem," text text_type_main-medium text_color_inactive"),exact:!0,to:{pathname:"/profile/orders"},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(je.jsx)("div",{className:"".concat(mt.a.navItem," text text_type_main-medium text_color_inactive"),onClick:B,children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(je.jsx)("div",{className:"text text_type_main-small text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(je.jsx)("div",{className:mt.a.detail,children:Object(je.jsxs)(i.d,{children:[Object(je.jsxs)(i.b,{path:"/profile",exact:!0,children:[!c&&Object(je.jsx)("div",{className:mt.a.form,children:Object(je.jsxs)("form",{className:b.a.form,onSubmit:D,children:[Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{disabled:g,type:"text",placeholder:"\u0418\u043c\u044f",name:"name",value:q.name,icon:"EditIcon",onChange:P,onBlur:function(){return v(!0)},onIconClick:function(){return v(!1)}})}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.EmailInput,{value:q.email,name:"email",onChange:P})}),Object(je.jsx)("span",{className:"mb-6",children:Object(je.jsx)(d.Input,{disabled:E,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:q.password,icon:"EditIcon",onChange:P,onBlur:function(){return F(!0)},onIconClick:function(){return F(!1)}})}),Object(je.jsxs)("div",{children:[Object(je.jsx)("span",{className:"mr-4",children:Object(je.jsx)(d.Button,{type:"primary",size:"large",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(je.jsx)(d.Button,{type:"primary",size:"large",onClick:L,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}),c&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{className:"text text_type_main-medium",children:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}),Object(je.jsx)("div",{className:"text text_type_main-medium",children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})]}),Object(je.jsx)(i.b,{path:"/profile/orders",exact:!0,children:Object(je.jsx)(gt,{})})]})})]}):Object(je.jsx)(i.a,{to:{pathname:"/login"}})},yt=n(104),Nt=["children"];function kt(e){var t=e.children,n=Object(yt.a)(e,Nt),a=Object(r.useState)(!1),c=Object(u.a)(a,2),s=c[0],o=c[1],d=de(),m=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(le());case 2:o(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){m()}),[]);var j=me((function(e){return e.auth})).isLogged;return s?Object(je.jsx)(i.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){var n=e.location;return j?t:Object(je.jsx)(i.a,{to:{pathname:"/login",state:{from:n}}})}})):Object(je.jsx)(je.Fragment,{})}var Ct=n(30),wt=n.n(Ct),It=function(e){var t=e.title,n=e.characteristic;return Object(je.jsxs)("div",{className:wt.a.item,children:[Object(je.jsx)("p",{className:"text_color_inactive text text_type_main-default","data-qa":"ingredient-characteristic-title",children:t}),Object(je.jsx)("p",{className:"text_color_inactive text text_type_digits-default","data-qa":"ingredient-characteristic",children:n})]})};var Et=function(e){var t=e.isModal,n=Object(r.useState)(),a=Object(u.a)(n,2),c=a[0],s=a[1],o=me((function(e){return e.burger})),l=o.itemsFailed,d=o.itemsRequest,m=o.items,j=Object(i.i)().id;return Object(r.useEffect)((function(){var e=m.find((function(e){return e._id===j}));s(e)}),[m]),c&&m.length?l?Object(je.jsx)("div",{className:wt.a.page,children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}):d?Object(je.jsx)("div",{className:wt.a.page,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(je.jsxs)("div",{className:t?"ml-25 mr-25":"".concat(wt.a.page),children:[!t&&Object(je.jsx)("h3",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(je.jsx)("img",{src:c.image,className:"".concat(wt.a.img," mb-4"),alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(je.jsx)("h5",{className:"".concat(wt.a.title," text text_type_main-medium mb-8"),"data-qa":"ingredient-name",children:c.name}),Object(je.jsxs)("div",{className:"".concat(wt.a.charectiristics," mb-15"),children:[Object(je.jsx)(It,{title:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",characteristic:c.calories}),Object(je.jsx)(It,{title:"\u0411\u0435\u043b\u043a\u0438, \u0433",characteristic:c.proteins}),Object(je.jsx)(It,{title:"\u0416\u0438\u0440\u044b, \u0433",characteristic:c.fat}),Object(je.jsx)(It,{title:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",characteristic:c.carbohydrates})]})]}):Object(je.jsx)(je.Fragment,{})},Ft=n(23),St=n.n(Ft);var Tt=function(e){var t=e.isModal,n=de(),a=me((function(e){return e.orderList.orders})),c=me((function(e){return e.burger.items})),s=Object(i.i)().id;Object(r.useEffect)((function(){if(!a)return n(jt("wss://norma.nomoreparties.space/orders/all")),function(){n(bt())}}),[n]);var o,u=a?a.orders.find((function(e){return e._id===s})):void 0,m=[];if(u){var j,b=Object(pt.a)(u.ingredients);try{var p=function(){var e=j.value;c.forEach((function(t){t._id===e&&m.push(Object(l.a)(Object(l.a)({},t),{},{key:Object(tt.a)()}))}))};for(b.s();!(j=b.n()).done;)p()}catch(x){b.e(x)}finally{b.f()}}return m&&(o=m.reduce((function(e,t){return e+t.price}),0)),m&&u?Object(je.jsx)("div",{className:t?"":St.a.page,children:Object(je.jsxs)("div",{className:St.a.container,children:[Object(je.jsx)("p",{className:"".concat(St.a.order_number," text text_type_digits-default"),children:"#".concat(u.number)}),Object(je.jsx)("h3",{className:"text text_type_main-medium mb-3 mt-10",children:u.name}),Object(je.jsx)("p",{className:"done"===u.status?"".concat(St.a.success," text text_type_main-small"):"text text_type_main-small",children:"done"===u.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(je.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(je.jsx)("div",{className:"".concat(St.a.ingredient," mt-4"),children:m.map((function(e){return Object(je.jsxs)("div",{className:"".concat(St.a.item," mt-4 mr-4"),children:[Object(je.jsxs)("div",{className:St.a.flexbox,children:[Object(je.jsx)("div",{className:St.a.border,children:Object(je.jsx)("div",{style:{position:"relative",backgroundImage:"url(".concat(e.image_mobile,")"),backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",width:"64px",height:"64px"}})}),Object(je.jsx)("p",{className:"text text_type_main-default ml-4",children:e.name})]}),Object(je.jsxs)("div",{className:St.a.flexbox,children:[Object(je.jsxs)("p",{className:"mr-2 text text_type_digits-default",children:["bun"===e.type?"2":"1","\xd7",e.price]}),Object(je.jsx)(d.CurrencyIcon,{type:"primary"})]})]},e.key)}))}),Object(je.jsxs)("div",{className:"".concat(St.a.item," mt-10"),children:[Object(je.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:g(u.createdAt)}),Object(je.jsxs)("div",{className:"".concat(St.a.flexbox," mr-4"),children:[Object(je.jsx)("p",{className:"text text_type_digits-default mr-2",children:o}),Object(je.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})}):Object(je.jsx)(je.Fragment,{})},qt=function(){return Object(je.jsx)("div",{className:b.a.container,children:Object(je.jsxs)("div",{className:b.a.form,children:[Object(je.jsx)("img",{src:"/images/404.png"}),Object(je.jsx)("br",{}),Object(je.jsx)(m.b,{to:"/",className:"".concat(b.a.link," text text_type_main-medium"),children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})]})})},Rt=n(34),Pt=n.n(Rt);var Dt=function(){var e=de();Object(r.useEffect)((function(){return e(jt("wss://norma.nomoreparties.space/orders/all")),function(){e(bt())}}),[e]);var t=me((function(e){return e.orderList.orders})),n=[],a=[];t&&t.orders.forEach((function(e){"done"===e.status?n.push(e.number):a.push(e.number)}));var c={height:window.innerHeight,overflow:"hidden"};return Object(je.jsx)("div",{style:c,children:Object(je.jsxs)("div",{className:Pt.a.main,children:[Object(je.jsxs)("div",{children:[Object(je.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),t&&Object(je.jsx)("div",{className:Pt.a.container,children:t.orders.map((function(e,t){return Object(je.jsx)(ht,{orderData:e},t)}))})]}),Object(je.jsxs)("div",{className:"mt-25 ml-15",children:[Object(je.jsxs)("div",{className:Pt.a.flexbox,children:[Object(je.jsxs)("div",{children:[Object(je.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(je.jsx)("div",{className:Pt.a.columns,children:n.map((function(e,t){return Object(je.jsx)("div",{className:"".concat(Pt.a.succcess," text text_type_digits-default mr-2"),children:e},t)}))})]}),Object(je.jsxs)("div",{children:[Object(je.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(je.jsx)("div",{className:Pt.a.columns,children:a.map((function(e,t){return Object(je.jsx)("div",{className:"text text_type_digits-default mr-2",children:e},t)}))})]})]}),Object(je.jsx)("div",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),t&&Object(je.jsx)("div",{className:"text text_type_digits-large",children:t.total}),Object(je.jsx)("div",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),t&&Object(je.jsx)("div",{className:"text text_type_digits-large",children:t.totalToday})]})]})})},Lt=n(28),Bt=n.n(Lt);var Mt=function(){var e=Object(i.h)(),t="/profile",n="/feed";return Object(je.jsxs)("header",{className:"".concat(Bt.a.header," pt-4 pb-4"),children:[Object(je.jsxs)("div",{className:Bt.a.items,children:[Object(je.jsxs)(m.b,{to:"/","data-qa":"main-link",className:"".concat(Bt.a.item," mr-2 pt-4 pb-4 pl-5 pr-5"),children:[Object(je.jsx)(d.BurgerIcon,{type:"/"===(null===e||void 0===e?void 0:e.pathname)?"primary":"secondary"}),Object(je.jsx)("p",{className:"/"===(null===e||void 0===e?void 0:e.pathname)?"".concat(Bt.a.active," ml-2"):"ml-2 text_color_inactive",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(je.jsxs)(m.b,{to:"/feed",className:"".concat(Bt.a.item," pt-4 pb-4 pl-5 pr-5"),children:[Object(je.jsx)(d.ListIcon,{type:(null===e||void 0===e?void 0:e.pathname)===n?"primary":"secondary"}),Object(je.jsx)("p",{className:(null===e||void 0===e?void 0:e.pathname)===n?"".concat(Bt.a.active," ml-2 text text_type_main-default"):"ml-2 text text_type_main-default text_color_inactive",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(je.jsx)(d.Logo,{}),Object(je.jsxs)(m.b,{to:"/profile","data-qa":"profile-link",className:"".concat(Bt.a.item," pt-4 pb-4 pl-5 pr-5"),children:[Object(je.jsx)(d.ProfileIcon,{type:(null===e||void 0===e?void 0:e.pathname)===t?"primary":"secondary"}),Object(je.jsx)("p",{className:(null===e||void 0===e?void 0:e.pathname)===t?"".concat(Bt.a.active," ml-2 text text_type_main-default"):"ml-2 text text_type_main-default text_color_inactive",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})};var Ut,zt=function(){var e=Object(i.h)(),t=Object(i.g)(),n=("PUSH"===t.action||"REPLACE"===t.action)&&e.state&&e.state.background,a=de();Object(r.useEffect)((function(){a((function(e){return e(Be()),q().then((function(t){t&&t.success?e(Me(t.data)):e(Ue())})).catch((function(){e(Ue())}))}))}),[a]);var c=function(){t.goBack()};return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(Mt,{}),Object(je.jsxs)(i.d,{location:n||e,children:[Object(je.jsx)(i.b,{path:"/",exact:!0,children:Object(je.jsx)(it,{})}),Object(je.jsx)(i.b,{path:"/react-burger",exact:!0,children:Object(je.jsx)(it,{})}),Object(je.jsx)(i.b,{path:"/login",children:Object(je.jsx)(be,{})}),Object(je.jsx)(i.b,{path:"/register",children:Object(je.jsx)(ot,{})}),Object(je.jsx)(i.b,{path:"/forgot-password",children:Object(je.jsx)(ut,{})}),Object(je.jsx)(i.b,{path:"/reset-password",children:Object(je.jsx)(lt,{})}),Object(je.jsx)(i.b,{path:"/feed",exact:!0,children:Object(je.jsx)(Dt,{})}),Object(je.jsx)(i.b,{path:"/ingredients/:id",exact:!0,children:Object(je.jsx)(Et,{})}),Object(je.jsx)(i.b,{path:"/feed/:id",exact:!0,children:Object(je.jsx)(Tt,{})}),Object(je.jsx)(kt,{path:["/profile","/profile/orders"],exact:!0,children:Object(je.jsx)(vt,{})}),Object(je.jsx)(kt,{path:"/profile/orders/:id",exact:!0,children:Object(je.jsx)(Tt,{})}),Object(je.jsx)(i.b,{children:Object(je.jsx)(qt,{})})]}),!!n&&Object(je.jsx)(i.b,{path:"/ingredients/:id",children:Object(je.jsx)(Te,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",isOpened:!0,onModalClose:function(){return c()},children:Object(je.jsx)(Et,{isModal:!0})})}),!!n&&Object(je.jsx)(i.b,{path:"/feed/:id",children:Object(je.jsx)(Te,{isOpened:!0,onModalClose:function(){return c()},children:Object(je.jsx)(Tt,{isModal:!0})})}),!!n&&Object(je.jsx)(i.b,{path:"/profile/orders/:id",children:Object(je.jsx)(Te,{isOpened:!0,onModalClose:function(){return c()},children:Object(je.jsx)(Tt,{isModal:!0})})})]})};!function(e){e.CONNECTING="CONNECTING...",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Ut||(Ut={}));var Jt={status:Ut.OFFLINE,connectionError:"",orders:null},At=Object(A.c)({name:"orderList",initialState:Jt,reducers:{wsOpen:function(e){e.status=Ut.ONLINE},wsClose:function(e){e.status=Ut.OFFLINE},wsError:function(e,t){e.connectionError=t.payload},wsMessage:function(e,t){e.orders=t.payload}}}),Ht=At.actions,Wt=Ht.wsOpen,Vt=Ht.wsClose,Kt=Ht.wsError,Zt=Ht.wsMessage,Gt=At.reducer,Yt=n(21),Qt=Object(Yt.b)({burger:Ye,auth:oe,orderList:Gt}),Xt=function(e){return function(t){var n=null;return function(r){return function(a){var c=t.dispatch,s=a.payload,i=e.wsConnect,o=e.wsSendMessage,l=e.onOpen,u=e.onClose,d=e.onError,m=e.onMessage,j=e.wsDisconnect;i.match(a)&&(n=new WebSocket(s)),n&&(n.onopen=function(){c(l())},n.onerror=function(){c(d("\u043e\u0448\u0438\u0431\u043a\u0430"))},n.onmessage=function(e){var t=e.data,n=JSON.parse(t);c(m(n))},n.onclose=function(){c(u())},(null===o||void 0===o?void 0:o.match(a))&&n.send(JSON.stringify(s)),(null===j||void 0===j?void 0:j.match(a))&&n.close()),r(a)}}}}({wsConnect:jt,wsDisconnect:bt,onOpen:Wt,onClose:Vt,onError:Kt,onMessage:Zt}),$t=Object(A.a)({reducer:Qt,devTools:!1,middleware:function(e){return e().concat(Xt)}});s.a.render(Object(je.jsx)(a.a.StrictMode,{children:Object(je.jsx)(ue.a,{store:$t,children:Object(je.jsx)(m.a,{children:Object(je.jsx)(zt,{})})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={container:"profile_container__14vWe",navWrapper:"profile_navWrapper__1T8pQ",nav:"profile_nav__3bWfK",navItem:"profile_navItem__2KDaf",active:"profile_active__3H1De",form:"profile_form__28_M5",detail:"profile_detail__3NpYQ"}},23:function(e,t,n){e.exports={container:"orderCardDetails_container__2L8Kq",success:"orderCardDetails_success__1GqVf",flexbox:"orderCardDetails_flexbox__21Tth",border:"orderCardDetails_border__sUeqr",ingredient:"orderCardDetails_ingredient__3qNY0",item:"orderCardDetails_item__1GMTt",page:"orderCardDetails_page__335gw",order_number:"orderCardDetails_order_number__3MXrS"}},26:function(e,t,n){e.exports={list:"burgerConstructor_list__1dHdk",wrapper:"burgerConstructor_wrapper__USo0k",container:"burgerConstructor_container__1M9mN",listItem:"burgerConstructor_listItem__1dzIz",flex:"burgerConstructor_flex__2uNID",alignCenter:"burgerConstructor_alignCenter__aBSUh",order:"burgerConstructor_order__2ub4n",flexEnd:"burgerConstructor_flexEnd__2dyEa"}},27:function(e,t,n){e.exports={container:"orderCard_container__To-L7",first_line:"orderCard_first_line__12zu2",flexbox:"orderCard_flexbox__mzpu_",ingredient:"orderCard_ingredient__roY1A",name:"orderCard_name__372ZT",link:"orderCard_link__1VBrt"}},28:function(e,t,n){e.exports={header:"header_header__3rmxf",items:"header_items__13OC8",item:"header_item__3YTqF",active:"header_active__2ZczK"}},30:function(e,t,n){e.exports={img:"IngredientDetails_img__2VjEK",title:"IngredientDetails_title__3ZhvE",charectiristics:"IngredientDetails_charectiristics__25_s8",item:"IngredientDetails_item__38cXg",page:"IngredientDetails_page__3VOxV"}},33:function(e,t,n){e.exports={tabs:"burgerIngredients_tabs__j11R9",section:"burgerIngredients_section__3dk5R",tab:"burgerIngredients_tab__2d-Tj",activeTab:"burgerIngredients_activeTab__16icR"}},34:function(e,t,n){e.exports={main:"FeedPage_main__1qxbH",container:"FeedPage_container__33qfz",columns:"FeedPage_columns__3SdCK",flexbox:"FeedPage_flexbox__KkRRJ",succcess:"FeedPage_succcess__2VOSx"}},43:function(e,t,n){e.exports={cart:"cartBurger_cart__3eAft",price:"cartBurger_price__1jQVr",name:"cartBurger_name__2eaCc",link:"cartBurger_link__A_tu2"}},54:function(e,t,n){e.exports={order:"orderDetails_order__2cPif",text:"orderDetails_text__e5wP2"}},55:function(e,t,n){e.exports={main:"mainPage_main__tNMjO",error:"mainPage_error__25Iyr"}},76:function(e,t,n){e.exports={modal:"modal_modal__27dMB",header:"modal_header__3zngu"}},9:function(e,t,n){e.exports={container:"login_container__2nIAk",form:"login_form__2w70f",input:"login_input__2MClZ",link:"login_link__3TfZY"}},98:function(e,t,n){e.exports={list:"tabBurger_list__2ZVo3"}}},[[188,1,2]]]);
//# sourceMappingURL=main.ca0c5517.chunk.js.map